<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>科学技術部作品発表 プロジェクトページ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap');
        *{
            font-family: 'Noto Sans JP', sans-serif;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
    <h1>科学技術部作品発表</h1>
    <div id="mokuji">

    </div>
    <br>
    <h3>
        1年生
    </h3>

    <div id="abe"></div>
    <div id="aoki"></div>
    <div id="kobayasi"></div>
    <div id="iida"></div>
    <div id="nomura"></div>
    <div id="satou"></div>
    <div id="idogawa"></div>
    <div id="shimazaki"></div>
    <div id="sasaki"></div>
    <div id="hashimoto"></div>
    <h3>2年生</h3>
    <div id="anndou"></div>
    <div id="okita"></div>
    <div id="simada"></div>
    <div id="miyazaki"></div>
    <div id="kenmoti"></div>
    <div id="hayate"></div>

    <script>
        
        function datacreate(projectid){
            
            var projectname='';
            $.ajax({
                url:`https://api.scratch.mit.edu/projects/${projectid}`,
                type:'GET',
                success:function(data){
                    let json=JSON.parse(data);
                    projectname=json.title;
                }
            })

            let data=`<p>${projectname}<br><iframe src="https://turbowarp.org/${projectid}/embed" width="499" height="416" allowtransparency="true" frameborder="0" scrolling="no" allowfullscreen></iframe></p>`;
            return data;
        }
        var project={};

        //var date=new Date();
        //var jikan=date.getMinutes();
        
        if(document.cookie.indexOf('data')==0){
            project.abe=document.getElementById('abe');
            project.aoki=document.getElementById('aoki');
            project.kobayasi=document.getElementById('kobayasi');
            project.iida=document.getElementById('iida');
            project.nomura=document.getElementById('nomura');
            project.satou=document.getElementById('satou');
            project.idokawa=document.getElementById('idokawa');
            project.shimazaki=document.getElementById('shimazaki');
            project.sasaki=document.getElementById('sasaki');
            project.hashimoto=document.getElementById('hashimoto');

            project.anndou=document.getElementById('anndou');
            project.okita=document.getElementById('okita');
            project.simada=document.getElementById('simada');
            project.miyazaki=document.getElementById('miyazaki');
            project.kennmoti=document.getElementById('kennmoti');
            project.hayate=document.getElementById('hayate');
            
            project.abe.innerHTML=datacreate();
            project.aoki.innerHTML=datacreate('927879682');
            project.nomura.innerHTML=datacreate();
            project.satou.innerHTML=datacreate();
            project.idokawa.innerHTML=datacreate();
            project.shimazaki.innerHTML=datacreate();
            project.sasaki.innerHTML=datacreate();

            project.anndou.innerHTML='';
            project.okita.innerHTML=datacreate();
            project.simada.innerHTML=datacreate();
            project.miyazaki.innerHTML=datacreate();
            project.kennmoti.innerHTML=datacreate();
            project.hayate.innerHTML=datacreate();
        }
        else{
            document.body.innerHTML=document.body.innerHTML+'<p>時間切れまたはタイムアウトしました。<br>QRコードを読み直してください。</p>';
        }
    </script>
</body>
</html>